<!doctype html>
<html lang="bg">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Поръчка — RU58841 5%</title>
<link rel="stylesheet" href="../assets/style.css">
</head>

<body>

<h1>Поръчка — RU58841 5%</h1>

<form id="orderForm">

  <select name="qty" required>
    <option value="1">1 брой — 69 лв</option>
    <option value="2">2 броя — 125 лв</option>
    <option value="3">3 броя — 165 лв</option>
  </select>

  <select name="delivery" id="deliverySelect" required>
    <option value="office">До офис на куриер</option>
    <option value="address">До адрес</option>
  </select>

  <input type="text" name="address" id="officeBox" placeholder="Офис на куриер">

  <input type="text" name="address_full" id="addrBox" class="hidden" placeholder="Адрес за доставка">

  <input type="text" name="name" placeholder="Име и фамилия" required>
  <input type="tel" name="phone" placeholder="Телефон" required>
  <input type="email" name="email" placeholder="Email" required>

  <select name="nft" id="nftSelect">
    <option value="no">Без NFT бележка</option>
    <option value="yes">Желая NFT бележка</option>
  </select>

  <input type="text" name="wallet" id="walletBox" class="hidden" placeholder="Polygon 0x...">

  <button type="submit">Изпрати</button>
</form>

<script>
// --- Променливи
const deliverySelect = document.getElementById("deliverySelect");
const officeBox = document.getElementById("officeBox");
const addrBox   = document.getElementById("addrBox");
const walletBox = document.getElementById("walletBox");

// --- Показване/скриване на адреси
deliverySelect.addEventListener("change", function(){
  if (this.value === "office") {
    officeBox.classList.remove("hidden");
    addrBox.classList.add("hidden");
  } else {
    officeBox.classList.add("hidden");
    addrBox.classList.remove("hidden");
  }
});

// --- NFT Wallet
document.getElementById("nftSelect").addEventListener("change", function(){
  walletBox.classList.toggle("hidden", this.value !== "yes");
});

// --- Изпращане към Google Script
document.getElementById("orderForm").addEventListener("submit", async (e)=>{
  e.preventDefault();

  const form = new FormData(e.target);
  form.append("product","RU58841 5%");

  await fetch("https://script.google.com/macros/s/AKfycbxz1twvsVm82_eSVic3eMcZ9IKDZXSjTq_CHIpbyJi3v3j1AhTR47NaoQyIlo-pP7_ljQ/exec", {
    method:"POST",
    mode:"no-cors",
    body:form
  });

  window.location.href="../thanks.html";
});
</script>

</body>
</html>
